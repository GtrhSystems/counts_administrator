{% extends "layout.html" %}
{% block page_header %}
Editar Cliente
{% endblock %}
{% load humanize %}
{% load widget_tweaks %}
{% block content %}
<div class="col-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">Formulario de edici√≥n</h4>
        <p class="card-description">Digite los nuevos datos del cliente</p>
        <form  method="post" class="forms-sample customer" >
          	{% csrf_token %}
          <div class="form-group">
              <label  class="text-label">{{ form.name.label_tag }}</label>
              {{ form.name|add_class:'form-control' }}
              <p class="help-block">{{ form.name.help_text }}</p>
          </div>

          <div class="form-group">
            <label  class="text-label">{{ form.phone.label_tag }}</label>
            {{ form.phone|add_class:'form-control' }}
            <p class="help-block">{{ form.phone.help_text }}</p>
          </div>
          <div class="form-group">
            <label  class="text-label">{{ form.active.label_tag }}</label>
            {{ form.active }}
            <p class="help-block">{{ form.active.help_text }}</p>
         </div>

          <button type="submit" class="btn btn-primary mr-2 update">Guardar</button>
        </form>
        {{ form.errors }}
      </div>
    </div>


</div>
<div class="col-lg-12 grid-margin stretch-card">
  <div class="card">
    <form  method="post" class="forms-sample sales" action="/count/sales/list/{{ pk }}">
    {% csrf_token %}
    <div class="card-body">
      <h4 class="card-title">Perfiles vendidos</h4>
      <p class="card-description"><code></code>
      </p>
      <div class="form-group table-responsive">

            <table class="table table-dark table-normal">
              <thead>
                <tr>
                  <th> # Factura </th>
                  <th> Fecha </th>
                  <th> Cliente </th>
                  <th> Plataforma </th>
                  <th> Correo </th>
                  <th> Pin </th>
                  <th> Meses </th>
                  <th> Vencimiento
                  <th> Dias restantes </th>
                  <th> Renovar </th>
                </tr>
              </thead>
              <tbody>
               {% for sale in sales %}
                <tr>
                  <td>{{ sale.bill.id }}</td>
                  <td>{{ sale.date|date:"d/M/Y" }}</td>
                  <td>{{ sale.bill.customer.name }}</td>
                  <td>{{ sale.profile.count.platform }}</td>
                  <td>{{ sale.profile.count.email }}</td>
                   <td>{{ sale.profile.pin }}</td>
                  <td>{{ sale.months }}</td>
                  <td>{{ sale.date_limit|date:"d/M/Y" }}</td>
                  <td>{{ sale.rest_days }}</td>
                  <td>
                     <input type="checkbox" name="{{ sale.profile.id }}" class="form-check-input" data-toggle="toggle" data-onstyle="primary"  >
                  </td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </form>
        </div>
        <div class="form-group">
          <label for="months">Meses a renovar:</label>
          <input type="number" id="months" name="months" min="1" max="12">
        </div>
       <button type="submit" class="btn btn-primary mr-2 renew">Renovar</button>
       {{ form.errors }}
    </div>
  </div>
</div>
<script>
    $(".renew').click(function(e){
        e.preventDefault()
        $(".sales').submit()

    })
     $(".update').click(function(e){
        e.preventDefault()
        $(".customer').submit()

    })


</script>
{% endblock %}